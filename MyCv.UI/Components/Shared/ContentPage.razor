<PageTitle>@PageTitle</PageTitle>
<ContentMenu SectionLinks=@_sectionLinks />
<MudGrid Spacing="10" Justify="Justify.Center" id="main">
    <CascadingValue Value="this">
        @Header
        @Sections
    </CascadingValue>
</MudGrid>

@code {
    private Dictionary<string, string> _sectionLinks { get; set; } = [];

    [Parameter]
    public required string PageLink { get; set; }

    [Parameter]
    public required string PageTitle { get; set; }

    [Parameter]
    public RenderFragment Header { get; set; }

    [Parameter]
    public RenderFragment? Sections { get; set; }

    /// <summary>
    /// Register header name for creating the menu.
    /// </summary>
    /// <param name="headerName"></param>
    public void RegisterHeader(string headerName)
    {
        _sectionLinks[headerName] = PageLink;
    }

    /// <summary>
    /// Register sections for creating the menu.
    /// </summary>
    public void RegisterSection(string sectionName, string fragmentName)
    {
        _sectionLinks[sectionName] = $"{PageLink}#{fragmentName}";
    }
}
