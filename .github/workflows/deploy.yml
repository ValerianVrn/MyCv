name: Deploy to GitHub Pages                                                    
                                                                                
on:                                                                             
  push:                                                                         
    branches: [ "main", "develop" ]
  pull_request:                                                                 
    branches: [ "main", "develop" ]                                                          
                                                                                
jobs:                                                                           
  deploy:                                                                       
    runs-on: ubuntu-latest                                                      
    permissions:                                                                
      contents: read                                                            
      pages: write                                                              
      id-token: write                                                           
                                                                                
    environment:                                                                
      name: github-pages                                                        
      url: ${{ steps.deployment.outputs.page_url }}                             
                                                                                
    steps:                                                                      
    - uses: actions/checkout@v4                                                 
                                                                                
    - name: Setup .NET                                                          
      uses: actions/setup-dotnet@v4                                             
      with:                                                                     
        dotnet-version: '8.0.x'                                                 
                                                                                
    - name: Restore dependencies                                                
      run: dotnet restore                                                       
                                                                                
    - name: Build                                                               
      run: dotnet build --no-restore --configuration Release                    
                                                                                
    - name: Publish                                                             
      run: dotnet publish MyCv.UI/MyCv.UI.csproj --no-build --configuration Release --output publish                                                        
                                                                                
    - name: Setup Pages                                                         
      uses: actions/configure-pages@v4                                          
                                                                                
    - name: Upload artifact                                                     
      uses: actions/upload-pages-artifact@v3                                    
      with:                                                                     
        path: 'publish/wwwroot'                                                 
                                                                                
    - name: Deploy to GitHub Pages                                              
      id: deployment                                                            
      uses: actions/deploy-pages@v4
